<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>WW-Blueprint-Core </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="WW-Blueprint-Core ">
    <meta name="generator" content="docfx 2.58.4.0">
    
    <link rel="shortcut icon" href="favicon.ico">
    <link rel="stylesheet" href="styles/docfx.vendor.css">
    <link rel="stylesheet" href="styles/docfx.css">
    <link rel="stylesheet" href="styles/main.css">
    <meta property="docfx:navrel" content="toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="index.html">
                <img id="logo" class="svg" src="logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        <div class="article row grid">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="ww-blueprint-core">WW-Blueprint-Core</h1>

<p>Fluent API library for modifying Pathfinder: Wrath of the Righteous and validating Blueprint configurations.</p>
<h1 id="status-wip">Status: WIP</h1>
<p>Not ready for use as a library yet. There are a few key things that need to be finalized before I
publish:</p>
<ol>
<li>Finalize ActionListBuilder extension class distinctions <strong>DONE</strong></li>
<li>Finalize ConditionsCheckerBuilder extension class distinctions <strong>DONE</strong></li>
<li>Add Create() to BlueprintConfigurator <strong>DONE</strong></li>
<li>Cleanup Utils APIs <strong>IN PROGRESS</strong></li>
</ol>
<p>Once these are done it will be usable but incomplete. Completion is dependent on implementing all
Actions, Conditions, and Components in the appropriate Builder or Configurator API.</p>
<h2 id="features">Features</h2>
<h3 id="blueprint-configurators">Blueprint Configurators</h3>
<p>Each concrete blueprint class has a corresponding configurator, e.g. <code>BuffConfigurator</code>, which exposes a fluent API for modifying its field values and blueprint components. Once you call <code>Configure()</code> on a blueprint configurator, all of the changes are committed and validated. If validation fails, all errors are bundled into a warning log message.</p>
<h3 id="actionlist-and-conditionschecker-builders">ActionList and ConditionsChecker Builders</h3>
<p><code>ActionList</code> and <code>ConditionsChecker</code> are supported with a builder API. Blueprint configurators take builders are arguments for blueprint components to minimize boilerplate. To simplify their usage, the actual methods for each action or condition are grouped into extension classes by use case. This allows you to ignore actions unrelated to your modification. e.g. If you are only adding new feats you can skip including extension classes like <code>ActionListBuilderKingdomEx</code> which only affect the kingdom building and crusade portion of the game.</p>
<h3 id="validation">Validation</h3>
<p>All actions, conditions, blueprints, and blueprint components are validated when built or configured. Validation is done through a combination of Wrath's <code>ValidationContext</code> API with additional checks to validate implicit contracts in the code that native validation does not check.</p>
<h2 id="usage">Usage</h2>
<p>Right now it's not ready for use--the API may change in breaking ways while I finish the initial release. However, feel free to start using it or even submitting PRs or Issues. I'm particularly interested in feedback on how to logically group Actions and Conditions.</p>
<p>You can use <code>copy_assemblies.bat</code> to set up your assembly directory for project references: you must set the <code>WRATH_DIR</code> environment variable to the root install directory for Pathfinder: Wrath of the Righteous. You must use a publicized assembly. See <a href="https://github.com/TylerGoeringer/OwlcatModdingWiki/wiki/Publicise-Assemblies">Publicize Assemblies</a> for more details.</p>
<h3 id="example">Example</h3>
<p><strong>Skald's Vigor</strong></p>
<pre><code class="lang-C#">BuffConfigurator.For(SkladsVigorBuff)
    .ContextRankConfig(ContextRankConfigs.ClassLevel(new string[] { SkaldClass }).DivideByThenDoubleThenAdd1(8))
    .FastHealing(1, bonusValue: ContextValues.Rank(AbilityRankType.Default))
    .Configure();

var applyBuff = ActionListBuilder.New().ApplyBuff(SkaldsVigorBuff, permanent: true, dispellable: false);
BuffConfigurator.For(RAGING_SONG_BUFF)
    .FactContextActions(
        onActivated:
            ActionListBuilder.New()
                .Conditional(
                    ConditionsCheckerBuilder.New().TargetIsYourself().HasFact(SkaldsVigor),
                    ifTrue: applyBuff)
                .Conditional(
                    ConditionsCheckerBuilder.New().CasterHasFact(GreaterSkaldsVigor),
                    ifTrue: applyBuff),
        onDeactivated: ActionListBuilder.New().RemoveBuff(SkaldsVigorBuff))
    .Configure();
</code></pre>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/TylerGoeringer/WW-Blueprint-Core/blob/main/Blueprint-Core/index.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="styles/docfx.js"></script>
    <script type="text/javascript" src="styles/main.js"></script>
  </body>
</html>
