<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Getting Started </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Getting Started ">
    <meta name="generator" content="docfx 2.58.4.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="getting-started">Getting Started</h1>

<ol>
<li>Set up your project. If you haven't written mods for any Pathfinder game, start with the <a href="https://github.com/WittleWolfie/OwlcatModdingWiki/wiki/Beginner-Guide">Beginner Guide</a> on the <a href="https://github.com/WittleWolfie/OwlcatModdingWiki/wiki">OwlcatModdingWiki</a>.</li>
<li>Create a <a href="https://github.com/WittleWolfie/OwlcatModdingWiki/wiki/Publicise-Assemblies">public assembly</a>.</li>
<li>Install <a href="https://www.nuget.org/packages/WW-Blueprint-Core/">WW-Blueprint-Core</a> using <a href="https://docs.microsoft.com/en-us/nuget/what-is-nuget">NuGet</a>.
<ul>
<li>The package contains a folder named <code>BlueprintCore</code> that contains the library source code which is included directly in your project.</li>
</ul>
</li>
<li>Make sure your project is configured for .NET 4.7.2 and the latest C# language version.
<ul>
<li>In your .csproj file you should have the following properties:</li>
</ul>
</li>
</ol>
<pre><code class="lang-xml">&lt;PropertyGroup&gt;
  &lt;LangVersion&gt;latest&lt;/LangVersion&gt;
  &lt;TargetFramework&gt;net472&lt;/TargetFramework&gt;
&lt;/PropertyGroup&gt;
</code></pre>
<ol start="5">
<li>Add the necessary assembly references from the game install directory:
<ul>
<li><code>&lt;WrathInstallDir&gt;/Wrath_Data/Managed/Owlcat.Runtime.Visual.dll</code></li>
<li><code>&lt;WrathInstallDir&gt;/Wrath_Data/Managed/Owlcat.Runtime.UI.dll</code></li>
</ul>
</li>
<li>You're ready to go!</li>
</ol>
<p>If you're interested in contributing see <a href="contributing.html">How to Contribute</a>.</p>
<h2 id="blueprint-configurators">Blueprint Configurators</h2>
<p>All blueprint types inheriting from BlueprintScriptableObject have a corresponding configurator. e.g. <a class="xref" href="../api/BlueprintCore.Blueprints.Configurators.Buffs.BuffConfigurator.html">BuffConfigurator</a> is the configurator for <code>BlueprintBuff</code>.</p>
<p>If you write a custom blueprint or use one from a mod you can use <a class="xref" href="../api/BlueprintCore.Blueprints.Configurators.BlueprintConfigurator-1.html">BlueprintConfigurator</a>. This won't expose fields and supported components for the type but allows use of the basic configurator API and validation with any blueprint type:</p>
<p>To use a configurator:</p>
<ol>
<li>Instantiate a configurator using <code>For()</code> or <code>New()</code>
<ul>
<li><code>For()</code> creates a configurator for an existing blueprint</li>
<li><code>New()</code> creates and registers a new blueprint</li>
</ul>
</li>
<li>Modify the blueprint using the configurator methods</li>
<li>Commit the configuration with <a href="xref:BlueprintCore.Blueprints.BaseBlueprintConfigurator%602.Configure">Configure()</a>
<ul>
<li>Until this is called, no changes are made to the blueprint</li>
<li>After commit the blueprint is validated and any errors are logged as a warning</li>
</ul>
</li>
</ol>
<pre><code class="lang-C#">BuffConfigurator.New(MyBuffName, MyBuffGuid).AddStatBonus(stat: StatType.Strength, value: 2).Configure();
</code></pre>
<p>This code will create a new <code>BlueprintBuff</code> using the provided name and GUID. When the buff is applied to a unit it
grants +2 to Strength because of the <code>AddStatBonus</code> component.</p>
<h3 id="common-methods">Common Methods</h3>
<ul>
<li><a class="xref" href="../api/BlueprintCore.Blueprints.Configurators.BaseBlueprintConfigurator-2.html#BlueprintCore_Blueprints_Configurators_BaseBlueprintConfigurator_2_AddComponent_Kingmaker_Blueprints_BlueprintComponent_">AddComponent</a>
<ul>
<li>Adds a <code>BlueprintComponent</code> of any type</li>
<li>Used internally by all configurator methods that add a new component</li>
<li>Use this for custom components in your modification</li>
<li>All component types in the base game are supported by type specific methods. e.g. <code>AddStatBonus</code></li>
</ul>
</li>
<li><a class="xref" href="../api/BlueprintCore.Blueprints.Configurators.BaseBlueprintConfigurator-2.html#BlueprintCore_Blueprints_Configurators_BaseBlueprintConfigurator_2_AddUniqueComponent_Kingmaker_Blueprints_BlueprintComponent_BlueprintCore_Blueprints_Configurators_BaseBlueprintConfigurator__0__1__ComponentMerge_System_Action_Kingmaker_Blueprints_BlueprintComponent_Kingmaker_Blueprints_BlueprintComponent__">AddUniqueComponent</a>
<ul>
<li>Similar to <code>AddComponent</code>, but for components for which only one can exist in a blueprint</li>
<li>Supports user defined conflict resolution if multiple components are present. See <a class="xref" href="../api/BlueprintCore.Blueprints.Configurators.BaseBlueprintConfigurator-2.ComponentMerge.html">ComponentMerge</a>.</li>
</ul>
</li>
<li><a class="xref" href="../api/BlueprintCore.Blueprints.Configurators.BaseBlueprintConfigurator-2.html#BlueprintCore_Blueprints_Configurators_BaseBlueprintConfigurator_2_RemoveComponents_System_Func_Kingmaker_Blueprints_BlueprintComponent_System_Boolean__">RemoveComponents</a>
<ul>
<li>Removes any components matching the supplied <code>Func&lt;BlueprintComponent, bool&gt;</code></li>
</ul>
</li>
<li><a href="xref:BlueprintCore.Blueprints.Configurators.BaseBlueprintConfigurator%602.EditComponent%601(System.Action%7B%601%7D)">EditComponent</a>
<ul>
<li>After configuring components, runs the provided <code>Action</code> on the first component matching the specified type</li>
</ul>
</li>
<li><a class="xref" href="../api/BlueprintCore.Blueprints.Configurators.BaseBlueprintConfigurator-2.html#BlueprintCore_Blueprints_Configurators_BaseBlueprintConfigurator_2_OnConfigure_System_Action__0____">OnConfigure</a>
<ul>
<li>Executes an <code>Action</code> on the blueprint as the last step in configuration</li>
</ul>
</li>
</ul>
<h3 id="modifying-fields">Modifying Fields</h3>
<p>Each configurator exposes methods to set and modify fields. The comment summary for these methods links to the field they modify.</p>
<p>Simple fields such as booleans and integers are usually controlled by methods of the form <code>SetX()</code> while more complex or correlated fields have methods enforcing implicit contracts. For example, fields representing flags are often modified using <code>AddX()</code> and <code>RemoveY()</code> methods.</p>
<p>When a new configurator is added all fields should be exposed. If support for a field is missing either:</p>
<ol>
<li>The game code has been altered by a patch or modification</li>
<li>The field is never actually used in-game</li>
</ol>
<h3 id="adding-components">Adding Components</h3>
<p>Each <code>BlueprintComponent</code> type exposes methods to create and add them to the blueprint. The comment summary for these methods links to the type of component they create, or in some cases modify.</p>
<p>Within the game library you can add any component to any blueprint since they are all stored in a <code>BlueprintComponent</code> array. In reality, each component has restrictions on how it is used such as which type of blueprint and whether there can be more than one copy in a blueprint. See the <a href="https://github.com/WittleWolfie/OwlcatModdingWiki/wiki/%5BWrath%5D-Blueprints">Blueprints</a> article on the wiki for more details.</p>
<p>The configurator API attempts to enforce these requirements through two mechanisms:</p>
<ol>
<li>Each component type is added to a blueprint through its own method(s) only exposed by supported blueprint types.</li>
<li>Validation identifies and logs an error if any invalid component is present.</li>
</ol>
<p>Validation is required because the problem may already exist in the blueprint and because the configurator API uses an inheritance structure that mirrors the inheritance of blueprint types. Unfortunately, the component restrictions cannot be implemented with this type of inheritance. In other words: the configurator limits available components for a given blueprint type to the best of its ability but cannot guarantee that all exposed methods work.</p>
<h3 id="example-ac-buff">Example: AC Buff</h3>
<p>The following snippet creates a new <code>BlueprintBuff</code> that grants fast healing 1 until combat ends.</p>
<pre><code class="lang-C#">BuffConfigurator.Create(Name, Guid)
    .SetDisplayName(DisplayName)
    .SetDescription(Description)
    .SetIcon(Icon)
    .FastHealing(1)
    .RemoveWhenCombatEnds()
    .Configure();
</code></pre>
<h2 id="actionsbuilder-and-conditionsbuilder">ActionsBuilder and ConditionsBuilder</h2>
<p>Actions and conditions in the game are always used in the form of <code>ActionList</code> and <code>ConditionsChecker</code>. <a class="xref" href="../api/BlueprintCore.Actions.Builder.ActionsBuilder.html">ActionsBuilder</a> and <a class="xref" href="../api/BlueprintCore.Conditions.Builder.ConditionsBuilder.html">ConditionsBuilder</a> provide builder APIs for constructing them.</p>
<p>Basic usage both builders is the same:</p>
<ol>
<li>Instantiate a builder using <code>New()</code></li>
<li>Add actions/conditions using builder methods
<ul>
<li><code>ConditionsBuilder</code> has a special method, <a class="xref" href="../api/BlueprintCore.Conditions.Builder.ConditionsBuilder.html#BlueprintCore_Conditions_Builder_ConditionsBuilder_UseOr">UseOr()</a> which results in a <code>ConditionsChecker</code> that will pass if any one condition passes. By default all conditions must pass.</li>
</ul>
</li>
<li>Build the list with <code>Build()</code>
<ul>
<li>When an <code>ActionList</code> or <code>ConditionsChecker</code> is needed in a library method you do not need to call <code>Build()</code>. Instead the builder is passed into the method directly and <code>Build()</code> is called by the library.</li>
<li>Calling build logs validation errors as a warning.</li>
</ul>
</li>
</ol>
<p>As with configurator methods, builder methods declare the game type they implement in their comment summary.</p>
<h3 id="extensions">Extensions</h3>
<p>Actions and conditions are not scoped to certain blueprint types the same way that <code>BlueprintComponent</code> types are. To limit the number of actions and conditions available when using <a class="xref" href="../api/BlueprintCore.Actions.Builder.ActionsBuilder.html">ActionsBuilder</a> and <a class="xref" href="../api/BlueprintCore.Conditions.Builder.ConditionsBuilder.html">ConditionsBuilder</a>, specific types are implemented in extension methods.</p>
<p>The extension methods are logically grouped so for any given builder you most likely will only need to include a single extension namespace. The extension groups are the same for both builders:</p>
<ul>
<li>AreaEx
<ul>
<li>Extensions involving the game map, dungeons, or locations.</li>
<li>Types specifically related to the Kingdom and Crusade system are in KingdomEx.</li>
</ul>
</li>
<li>AVEx
<ul>
<li>Extensions involving audiovisual effects such as dialogs, camera, cutscenes, and sounds.</li>
<li><code>ActionsBuilder</code> only.</li>
</ul>
</li>
<li>BasicEx
<ul>
<li>Extensions for most game mechanics not included in ContextEx.</li>
</ul>
</li>
<li>ContextEx
<ul>
<li>Extensions for <code>ContextAction</code> and <code>ContextCondition</code> types.</li>
<li>Some types are implemented in more specific extensions such as KingdomEx.</li>
</ul>
</li>
<li>KingdomEx
<ul>
<li>Extensions for the Kingom and Crusade systems.</li>
</ul>
</li>
<li>MiscEx
<ul>
<li>Extensions that are not game mechanics related and don't fit into other categories.</li>
<li>Examples include things like achievement related actions.</li>
</ul>
</li>
<li>NewEx
<ul>
<li>Extensions for types provided by BlueprintCore.</li>
</ul>
</li>
<li>StoryEx
<ul>
<li>Extensions related to the story such as companion stories, quests, and etudes.</li>
</ul>
</li>
<li>UpgraderEx
<ul>
<li>Extensions for all <code>UpgraderOnlyActions</code> types.</li>
<li><code>ActionsBuilder</code> only.</li>
</ul>
</li>
</ul>
<h3 id="example-melee-attack">Example: Melee Attack</h3>
<p>The following snippet creates a new <code>ActionList</code> that initiates a melee attack if the target is in melee range.</p>
<pre><code>// Extension for MeleeAttack() which is a ContextAction
using BlueprintCore.Actions.Builder.ContextEx;
// Extension for TargetInMeleeRange() which is a new condition in the library
using BlueprintCore.Conditions.Builder.NewEx;

ActionsBuilder.New()
    .Conditional(
        ConditionsBuilder.New().TargetInMeleeRange(),
        ifTrue: ActionsBuilder.New().MeleeAttack())
    .Build();
</code></pre>
<h2 id="referencing-blueprints">Referencing Blueprints</h2>
<p>Whenever a method in the library needs to reference a blueprint it accepts a <code>string</code> argument. The argument can be the guid for the blueprint or it can be the name of the blueprint if you have registered a name to guid mapping using <a href="xref:BlueprintCore.Blueprints.BlueprintTool.AddGuidsByName(System.Collections.Generic.Dictionary%7BSystem.String,System.String%7D)">BlueprintTool#AddGuidsByName()</a>.</p>
<p>The method parameter comment for blueprint strings declare the type of blueprint expected.</p>
<h2 id="logging-and-utils">Logging and Utils</h2>
<h3 id="tools">Tools</h3>
<p>Tool classes provide simple utility functions, usually related to a specific type. See each class for more details, but some notable uses:</p>
<ul>
<li><a href="xref:BlueprintCore.Blueprints.BlueprintTool">BlueprintTool</a>
<ul>
<li>Use this to create, fetch, and provide a name to guid mapping for blueprints.</li>
</ul>
</li>
<li><a class="xref" href="../api/BlueprintCore.Utils.ElementTool.html">ElementTool</a>
<ul>
<li>Use this to create or initialize types inheriting from <code>Element</code>.</li>
</ul>
</li>
<li><a class="xref" href="../api/BlueprintCore.Utils.PrereqTool.html">PrereqTool</a>
<ul>
<li>Use this to create types inheriting from <code>Prerequisite</code>.</li>
</ul>
</li>
</ul>
<h3 id="type-constructors">Type Constructors</h3>
<p>Utility classes are provided to simplify creating game objects.</p>
<ul>
<li><a class="xref" href="../api/BlueprintCore.Utils.ContextDuration.html">ContextDuration</a>
<ul>
<li>Utility for creating <code>ContextDurationValue</code>.</li>
</ul>
</li>
<li><a class="xref" href="../api/BlueprintCore.Utils.ContextValues.html">ContextValues</a>
<ul>
<li>Utility for creating <code>ContextValue</code>.</li>
</ul>
</li>
<li><a class="xref" href="../api/BlueprintCore.Blueprints.Components.ContextRankConfigs.html">ContextRankConfigs</a>
<ul>
<li>Utility for creating <code>ContextRankConfig</code>.</li>
</ul>
</li>
</ul>
<h3 id="logging">Logging</h3>
<p><a class="xref" href="../api/BlueprintCore.Utils.LogWrapper.html">LogWrapper</a> wraps the game's <code>LogChannel</code> class to provide control over verbose log output. It is used internally for logging within BlueprintCore and is available for use within your modification, but not required.</p>
<h3 id="validator">Validator</h3>
<p><a class="xref" href="../api/BlueprintCore.Utils.Validator.html">Validator</a> is used by the library to validate method inputs, actions, conditions, blueprint components, and blueprints. Any game objects you create outside of the library can be validated using <a class="xref" href="../api/BlueprintCore.Utils.Validator.html#BlueprintCore_Utils_Validator_Check_System_Object_">Validator#Check()</a>.</p>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/WittleWolfie/WW-Blueprint-Core/blob/main/Blueprint-Core/articles/intro.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
